<!DOCTYPE html>
<html>
  <head>
    <title>EU-Wahl Quiz</title>

    <!-- Bootstrap  -->
	<link rel="stylesheet" href="css/bootstrap.css">
	<!-- Owl Carousel  -->
	<link rel="stylesheet" href="css/owl.carousel.css">
	<link rel="stylesheet" href="css/owl.theme.default.min.css">
	<!-- Animate.css -->
	<link rel="stylesheet" href="css/animate.css">
	<!-- Font Awesome -->
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
<link href="https://fonts.googleapis.com/css?family=Viga" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/style.css" />

    <script type="text/javascript">
      /**
      * Die Hauptklasse für das Quiz
      *
      * @param fragen ein Array mit Elementen vom Typ Frage
      */
      function Quiz(fragen){
        this.progress = 0;
        this.fragen = fragen;

        /**
        * Funktion, welche die erste Frage aus dem fragen-Array anzeigt
        */
        this.start = function(){
          this.fragen[0].setup();
        }

        /**
        * Funktion welche den progress um 1 erhöht und dann somit die nächste Frage anzeigt
        */
        this.weiter = function(){
          if(this.progress+1 < this.fragen.length){
            this.progress += 1;
            this.fragen[this.progress].setup();
          }else{
            var frage = new Frage("Willst du aufhören?", null, "f_final");
            frage.end();
            this.progress++;
          }

        }

        /**
        * Funktion welche den progress um 1 verringert und dann somit die vorherige Frage anzeigt
        */
        this.zurueck = function(){
          if(this.progress-1 >= 0){
            this.progress -= 1;
            this.fragen[this.progress].setup();
          }else{
            alert("Das ist die erste Frage!");
          }
        }

        /**
        * Funktion, die das Ergebnis anzeigt
        */
        this.ende = function(){
          document.getElementById("quiz").innerHTML = "<h1 class='second-title'>Danke für deine Teilnahme!</h1>";
        }

      }

      /**
      * Die Hauptklasse für die Fragen eines Quizzes
      *
      * @param titel Der Titel der Frage als String
      * @param antworten Ein Array von beliebig vielen Elementen vom Typ Antwort
      * @param id Die ID der Buttons
      */
      function Frage(titel, antworten, id){
        this.titel = titel;
        this.antworten = antworten;
        this.id = id;

        /**
        * Funktion, welche die Frage, mit ihren Antworten anzeigt
        */
        this.setup = function(){
          document.getElementById("quiz").innerHTML = "<form><h1 class='second-title'>"+this.titel + "</h1><br>";
          var i;
          for(i = 0; i < this.antworten.length; i++){
            document.getElementById("quiz").innerHTML += "<input type='radio' name='antworten' checked='"+this.antworten[i].checked+"' id='"+this.antworten[i].id+"'>"+antworten[i].text+"<br>";
          }
          document.getElementById("quiz").innerHTML += "<input type='button' name='button01' id='"+this.id+"' onclick='quiz.zurueck();' class='btn btn-md download-btn-first wow fadeInLeft animated' value='Zurück'></input>";
          document.getElementById("quiz").innerHTML += "<input type='button' name='button01' id='"+this.id+"' onclick='quiz.weiter();' class='btn btn-md download-btn-first wow fadeInLeft animated' value='Weiter'></input></form>";
        }

        /**
        * Funktion, welche den Nutzer fragt, ob er fertig ist mit dem Quiz
        */
        this.end = function(){
          document.getElementById("quiz").innerHTML = "<form><h1 class='second-title'>"+this.titel + "</h1><br>"
          document.getElementById("quiz").innerHTML += "<input type='button' name='button01' id='"+this.id+"' onclick='quiz.zurueck();' class='btn btn-md download-btn-first wow fadeInLeft animated' value='Nein'></input>";
          document.getElementById("quiz").innerHTML += "<input type='button' name='button01' id='"+this.id+"' onclick='quiz.ende();' class='btn btn-md download-btn-first wow fadeInLeft animated' value='Ja'></input></form>";
        }
      }

      /**
      * Die Hauptklasse für die Antworten auf Fragen des Quizzes
      *
      * @param text Der Text der Antwortmöglichkeit
      * @param kategorien Eine Map an Kategorien, welche als keys die Kategoriebezeichnungen hat
                          und als values, die Anzahl an Punkten die diese Antwortmöglichkeit für diese Kategorie hat
      * @param id Die ID der Antwortmöglichkeit
      * @param checked False, wenn das nicht die von Anfang an angekreuzte Antwort sein soll,
                       True, wenn schon. Bei einem Array für Frage, muss mindestens (& höchstens) eine Antwort ein checked=true haben.
      */
      function Antwort(text, kategorien, id, checked){
        this.text = text;
        this.kategorien = kategorien;
        this.id = id;
        this.checked = checked;
        this.getPunkte = function(){
          alert(this.kategorien.get("kat3"));
        }
      }
    </script>
    <meta charset="utf-8" />
  </head>
  <body>


    <div id="quiz"></div>

    <script type="text/javascript">
      //Hier werden die Kategorien erstellt
      var kats = new Map();
      kats.set("kat1", 2);
      kats.set("kat2", 1);
      kats.set("kat3", 0);

      //Hier werden die Antwortmöglichkeiten erstellt
      var answers = new Array(2);
      answers[0] = new Antwort("Ja", kats, "a1", true);
      answers[1] = new Antwort("Nein", kats, "a2", false);

      //Hier werden die Fragen erstellt
      var frage = new Array(2);
      frage[0] = new Frage("Findest du Artikel 13 sollte durchgesetzt werden?", answers, "f1");
      frage[1] = new Frage("Findest du, dass Homoehe überall gestattet sein soll?", answers, "f2");

      //Hier wird das Quiz gestartet
      var quiz = new Quiz(frage)
      quiz.start();
    </script>
  </body>
</html>
